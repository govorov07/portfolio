<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- 6.0.0-GA -->
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		<link rel="stylesheet" href="/portfolio/assets/styles/combined.css" />
		<link rel="stylesheet" href="/portfolio/assets/styles/custom.css" />
		<link rel="stylesheet" href="/portfolio/assets/styles/inline_styles.css" />
		
		<!-- Prism.js CSS -->
		<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
		<!-- Prism.js Core -->
		<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
		<!-- Автозагрузка -->
		<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
		<style>
			.code-container {
				margin: 20px 0;
				border-radius: 8px;
				overflow: hidden;
			}
			
			.code-header {
				background: #2d2d2d;
				color: white;
				padding: 10px 15px;
				font-family: monospace;
				display: flex;
				justify-content: between;
				align-items: center;
			}
			
			.code-language {
				font-weight: bold;
			}
			
			.copy-btn {
				background: #4CAF50;
				border: none;
				color: white;
				padding: 5px 10px;
				border-radius: 4px;
				cursor: pointer;
				margin-left: auto;
			}
			
			pre[class*="language-"] {
				margin: 0;
				border-radius: 0;
			}
		</style>

		<script src="/portfolio/assets/scripts/jquery-3.2.1.min.js"></script>
		<script src="/portfolio/assets/scripts/split/split.min.js"></script>
	</head>

	<body>
		<div class="full-height-container">
			<div id="sidebar" class="split">
				<div class="navgroup" id="search">
					<form
						action="/portfolio/pages/search.html"
						class="aui">
						<input type="text" name="q" id="tipue_search_input" class="medium-field text">
						<input class="button submit" type="submit" value="Search">
					</form>
				</div>

				<div class="navgroup" id="navigation">
					<ul>
						<li><span>Говоров Андрей Сергеевич</span><input type="checkbox" />
							<ul>
								<li><span><a href="/portfolio/pages/govorov/about.html">Обо мне</a></span></li>
								<li><span><a href="/portfolio/pages/govorov/cv.html">Резюме</a></span></li>
							</ul>
						</li>
						
						<li><span>Портфолио</span><input type="checkbox" checked/>
							<ul>
								<li><span>01. Требования</span><input type="checkbox" />
									<ul>
										<li><span><a href="/portfolio/pages/portofolio/requirements/rfilters.html">Требования к фильтрации событий</a></span></li>
									</ul>
								</li>
								
								<li><span>02. Спецификации</span><input type="checkbox" checked/>
									<ul>
										<li><span><b>Спецификация. Фильтрация событий</b></span></li>
									</ul>
								</li>
								
								<li><span>03. База данных</span><input type="checkbox" />
									<ul>
										<li><span><a href="/portfolio/pages/portofolio/database/events_groups.html">Группы событий</a></span></li>
										<li><span><a href="/portfolio/pages/portofolio/database/event_types.html">Типы событий</a></span></li>
										<li><span><a href="/portfolio/pages/portofolio/database/event_types_groups.html">Группы-типы событий</a></span></li>
									</ul>
								</li>
								
								<li><span>04. REST API</span><input type="checkbox" />
									<ul>
										<li><span><a href="/portfolio/pages/portofolio/api/postevents.html">POST api/v3/events</a></span></li>
										<li><span><a href="/portfolio/pages/portofolio/api/getfilters.html">GET api/v3/events/filters</a></span></li>
										<li><span><a href="/portfolio/pages/portofolio/api/postdays.html">POST api/v3/events/days</a></span></li>
									</ul>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>

			<div id="content" class="split">
				<div class='wiki-page'>
					<div class='wiki-title'>
						<h1 class='page-title-lvl-cover' id='Bookmark0001'>Спецификация. Фильтрация событий</h1>
					</div>

					<div class='wiki-content'>
						<div class="contentLayout2">
							<!---------------------------------------------------->
							<!--	История изменений							-->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<a name="Bookmark1000"></a>
										<h1 style="text-decoration: none;" id="Bookmark1000"><span class="nh-number">История изменений</span></h1>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<tbody>
													<tr >
														<th class="confluenceTh">Версия</th>
														<th class="confluenceTh">Автор</th>
														<th class="confluenceTh">Дата изменений</th>
														<th class="confluenceTh">Описание изменений</th>
														<th class="confluenceTh">Ссылка на задачу</th>
														<th class="confluenceTh">Комментарий</th>
														<th class="confluenceTh">Источник требования</th>
														<th class="confluenceTh">Согласовано с архитектором</th>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">v.1.0</td>
														<td class="confluenceTd" style="padding: 0.5em;"><a href="/portfolio/pages/govorov/about.html">Говоров Андрей</a></td>
														<td class="confluenceTd" style="padding: 0.5em;">01.06.2025</td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<p>Исходная страница.</p>
															<p>Редизайн. Добавление фильтров.</p>
														</td>
														<td class="confluenceTd" style="padding: 0.5em;"><a href="https://www.atlassian.com/software/jira">B2C-28132</a></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"><a href="/portfolio/pages/portofolio/requirements/rfilters.html">Требования к фильтрации событий</a></td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<p><a href="https://www.atlassian.com/ru/software/confluence">Системный архитектор</a></p>
															<p><span class="status-chip status-approved">СОГЛАСОВАНО</span></p>
														</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">v.2.0</td>
														<td class="confluenceTd" style="padding: 0.5em;"><a href="/portfolio/pages/govorov/about.html">Говоров Андрей</a></td>
														<td class="confluenceTd" style="padding: 0.5em;">01.07.2025</td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<p>Добавил сценарий загрузки раздела, функциональные и нефункциональные требования</p>
														</td>
														<td class="confluenceTd" style="padding: 0.5em;"><a href="https://www.atlassian.com/software/jira">B2C-28133</a></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<p><a href="https://www.atlassian.com/ru/software/confluence">Системный архитектор</a></p>
															<p><span class="status-chip status-pending">НА СОГЛАСОВАНИИ</span></p>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<hr>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!--	Оглавление									-->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<p></p>
										<div class="toc-macro rbtoc1739270405410">
											<ul class="toc-indentation">
												<li><a href="#Bookmark1000" title="История изменений">История изменений</a></li>
												<li><a href="#Bookmark2000" title="Сценарии">Сценарии</a>
													<ul class="toc-indentation">
														<li><a href="#Bookmark2100" title="Открытие страницы События">Открытие страницы "События"</a></li>
													</ul>
												</li>
												<li><a href="#Bookmark106" title="1. История изменений">1. История изменений</a></li>
												<li><a href="#Bookmark106" title="1. История изменений">1. История изменений</a></li>
												<li><a href="#Bookmark106" title="1. История изменений">1. История изменений</a></li>
												<li><a href="#Bookmark106" title="1. История изменений">1. История изменений</a></li>
												<li><a href="#Bookmark106" title="1. История изменений">1. История изменений</a></li>
												<li><a href="#Bookmark111" title="2. Введение">2. Введение</a>
													<ul class="toc-indentation">
														<li><a href="#Bookmark112" title="2.1. Общая информация">2.1. Общая информация</a></li>
													</ul>
												</li>
												<li><a href="#Bookmark113" title="3. SSM Описание">3. SSM Описание</a>
													<ul class="toc-indentation">
														<li><a href="#Bookmark114" title="3.1. Введение в проблематику">3.1. Введение в проблематику</a></li>
														<li><a href="#Bookmark115" title="3.2. Суть проблемы">3.2. Суть проблемы</a></li>
														<li><a href="#Bookmark116" title="3.3. Концептуальная модель">3.3. Концептуальная модель</a>
															<ul class="toc-indentation">
																<li><a href="#Bookmark117" title="3.3.1. Сравнение DTO">3.3.1. Сравнение DTO</a></li>
																<li><a href="#Bookmark118" title="3.3.2. Интерфейс">3.3.2. Интерфейс</a>
																	<ul class="toc-indentation">
																		<li><a href="#Bookmark119" title="3.3.2.1. Вариант 1">3.3.2.1. Вариант 1</a></li>
																		<li><a href="#Bookmark120" title="3.3.2.2. Вариант 2">3.3.2.2. Вариант 2</a></li>
																		<li><a href="#Bookmark121" title="3.3.2.3. Вариант 3">3.3.2.3. Вариант 3</a></li>
																	</ul>
																</li>
															</ul>
														</li>
														<li><a href="#Bookmark122" title="3.4. Риски. Реалии. Приоритеты">3.4. Риски. Реалии. Приоритеты</a></li>
													</ul>
												</li>
											</ul>
										</div>
										<p></p>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<hr>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!--	Сценарии									-->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<a name="Bookmark2000"></a>
										<h1 style="text-decoration: none;" id="Bookmark2000"><span class="nh-number">Сценарии</span></h1>
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100"><span class="nh-number">Открытие страницы "События"</span></h2>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<tbody>
													<tr>
														<th class="confluenceTh" style="padding: 0.5em;">USE CASE</th>
														<td class="confluenceTd" style="padding: 0.5em;">UC.EVENTS.LK-1</td>
													</tr>
													<tr>
														<th class="confluenceTh" style="padding: 0.5em;">Описание:</th>
														<td class="confluenceTd" style="padding: 0.5em;">Пользователь переходит в раздел "События".</td>
													</tr>
													<tr>
														<th class="confluenceTh" style="padding: 0.5em;">Основные действующие лица:</th>
														<td class="confluenceTd" style="padding: 0.5em;">
															<ul>
																<li>Пользователь УД</li>
																<li>ЛК/МП УД</li>
																<li>Бэкенд УД</li>
															</ul>
														</td>
													</tr>
													<tr>
														<th class="confluenceTh" style="padding: 0.5em;">Предварительные условия:</th>
														<td class="confluenceTd" style="padding: 0.5em;">
															<ul>
																<li>Пользователь авторизован в УД</li>
																<li>Пользователю назначена роль <Owner>, <Adult> или <Child></li>
															</ul>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
										<p><strong>Основной сценарий:</strong></p>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<tbody>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>1</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">Пользователь открывает страницу «События» (ЛК УД) / экран «События» (МП УД)</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>2</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">ЛК/МП УД отображает страницу «События» / экран «События» с предзагруженными неактивными фильтрами и лоадером</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>3</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">ЛК/МП УД вызывает метод Бэкенда УД <a href="/portfolio/pages/portofolio/api/getfilters.html">GET api/v3/events/filters</a> для получения типов фильтров событий</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>4</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">Бэкенд УД формирует ответ на основании данных в БД <a href="/portfolio/pages/portofolio/database/events_groups.html">events_groups</a> и <a href="/portfolio/pages/portofolio/database/event_types.html">event_types</a></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>5</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">Бэкенд УД возвращает ЛК/МП УД ответ со списком типов фильтров</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>6</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">ЛК/МП УД отображает активные фильтры</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>7</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">ЛК/МП УД вызывает метод Бэкенда УД <a href="/portfolio/pages/portofolio/api/postevents.html">POST api/v3/events</a> для получения списка событий, подходящих под установленные по умолчанию фильтры</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>8</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">Бэкенд УД формирует параметры запроса в EStore по переданным значениям фильтров</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>9</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">Бэкенд УД вызывает метод EStore <b>POST /api/estore/events/by_devices</b> для получения списка событий</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>10</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">EStore возвращает Бэкенду УД ответ со списком событий</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>11</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">Бэкенд УД обогащает события данными</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>12</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">Бэкенд УД возвращает ЛК/МП УД ответ со списком событий, подходящих под установленные по умолчанию фильтры</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>13</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">ЛК/МП УД отображает список событий</td>
													</tr>
												</tbody>
											</table>
										</div>
										<p><strong>Расширения:</strong></p>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<tbody>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>5а</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<ul>
																<li>Если Бэкенд УД по таймауту не возвращает ЛК/МП УД ответ:
																	<ul>
																		<li>ЛК УД отображает ошибку в виде нотификации:
																			<ul>
																				<li>Заголовок: "Что-то пошло не так"</li>
																				<li>Текст: "Не удалось загрузить список фильтров"</li>
																			</ul>
																		</li>
																		<li>МП УД отображает ошибку в виде шторки:
																			<ul>
																				<li>Заголовок: "Что-то пошло не так"</li>
																				<li>Текст: "Не удалось загрузить список фильтров"</li>
																				<li>Кнопка: "Попробовать ещё раз" (перезапускает процесс с 3 шага)</li>
																			</ul>
																		</li>
																	</ul>
																</li>
															</ul>
														</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>5б</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<ul>
																<li>Если Бэкенд УД возвращает ЛК/МП УД ответ с ошибкой:</p>
																	<ul>
																		<li>ЛК УД отображает ошибку в виде нотификации
																			<ul>
																				<li>Заголовок: "Что-то пошло не так"</li>
																				<li>Текст: "Не удалось загрузить список фильтров"</li>
																			</ul>
																		</li>
																		<li>МП УД отображает ошибку в виде шторки:
																			<ul>
																				<li>Заголовок: "Что-то пошло не так"</li>
																				<li>Текст: "Не удалось загрузить список фильтров"</li>
																				<li>Кнопка: "Попробовать ещё раз" (перезапускает процесс с 3 шага)</li>
																			</ul>
																		</li>
																	</ul>
																</li>
															</ul>
														</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>12а</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<ul>
																<li>Если Бэкенд УД по таймауту не возвращает ЛК/МП УД ответ:
																	<ul>
																		<li>ЛК УД отображает ошибку в виде нотификации:
																			<ul>
																				<li>Заголовок: "Что-то пошло не так"</li>
																				<li>Текст: "Не удалось загрузить список событий"</li>
																			</ul>
																		</li>
																		<li>МП УД отображает ошибку в виде шторки:
																			<ul>
																				<li>Заголовок: "Что-то пошло не так"</li>
																				<li>Текст: "Не удалось загрузить список событий"</li>
																				<li>Кнопка: "Попробовать ещё раз" (перезапускает процесс с 7 шага)</li>
																			</ul>
																		</li>
																	</ul>
																</li>
															</ul>
														</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>12б</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<ul>
																<li>Если Бэкенд УД возвращает ЛК/МП УД ответ с ошибкой:
																	<ul>
																		<li>ЛК УД отображает ошибку в виде нотификации:
																			<ul>
																				<li>Заголовок: "Что-то пошло не так"</li>
																				<li>Текст: "{message}"</li>
																			</ul>
																		</li>
																		<li>МП УД отображает ошибку в виде шторки:
																			<ul>
																				<li>Заголовок: "Что-то пошло не так"</li>
																				<li>Текст: "{message}"</li>
																				<li>Кнопка: "Попробовать ещё раз" (перезапускает процесс с 7 шага)</li>
																			</ul>
																		</li>
																	</ul>
																</li>
															</ul>
														</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"><b>12в</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">
															<p>Если Бэкенд УД вернул ЛК/МП УД пустой список (для установленных по умолчанию фильтров нет событий), ЛК/МП УД отображает текст «Нет событий».</p>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<hr>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!--	Схема открытия страницы "События"			-->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<a name="Bookmark3000"></a>
										<h1 style="text-decoration: none;" id="Bookmark3000"><span class="nh-number">Схема открытия страницы "События"</span></h1>
									</div>
									<section class="diagram-section">
										<div class="diagram-container">
											<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1030px" preserveAspectRatio="none" style="width:977px;height:1030px;background:#FFFFFF;" version="1.1" viewBox="0 0 977 1030" width="977px" zoomAndPan="magnify">
												<defs/>
												<g>
													<g>
														<title>.......... ..........</title>
														<rect fill="#FFFFFF" height="827.8047" style="stroke:#181818;stroke-width:1;" width="10" x="337.7329" y="112.4297" />
													</g>
													<g>
														<title>...... ..</title>
														<rect fill="#FFFFFF" height="286.9375" style="stroke:#181818;stroke-width:1;" width="10" x="577.144" y="185.8281" />
													</g>
													<g>
														<title>...... ..</title>
														<rect fill="#FFFFFF" height="357.0703" style="stroke:#181818;stroke-width:1;" width="10" x="577.144" y="538.0313" />
													</g>
													<g>
														<title>EStore</title>
														<rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="925.5063" y="633.4297" />
													</g>
													<rect fill="none" height="309.0703" style="stroke:#000000;stroke-width:1.5;" width="864.8247" x="10" y="200.8281" />
													<rect fill="none" height="379.2031" style="stroke:#000000;stroke-width:1.5;" width="960.5845" x="10" y="553.0313" />
													<g>
														<title>............ ..</title>
														<rect fill="#000000" fill-opacity="0.00000" height="867.9375" width="8" x="82.5093" y="81.2969" />
														<line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="86" x2="86" y1="81.2969" y2="949.2344" />
													</g>
													<g>
														<title>.......... ..........</title>
														<rect fill="#000000" fill-opacity="0.00000" height="867.9375" width="8" x="338.7329" y="81.2969" />
														<line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="342.5161" x2="342.5161" y1="81.2969"
															y2="949.2344" />
													</g>
													<g>
														<title>...... ..</title>
														<rect fill="#000000" fill-opacity="0.00000" height="867.9375" width="8" x="578.144" y="81.2969" />
														<line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="581.5894" x2="581.5894" y1="81.2969"
															y2="949.2344" />
													</g>
													<g>
														<title>EStore</title>
														<rect fill="#000000" fill-opacity="0.00000" height="867.9375" width="8" x="926.5063" y="81.2969" />
														<line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="930.4282" x2="930.4282" y1="81.2969"
															y2="949.2344" />
													</g>
													<g class="participant participant-head" data-participant="u"><text fill="#000000" font-family="sans-serif"
															font-size="14" lengthAdjust="spacing" textLength="127.0186" x="20" y="77.9951">Пользователь УД</text>
														<ellipse cx="86.5093" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;" />
														<path
															d="M86.5093,21.5 L86.5093,48.5 M73.5093,29.5 L99.5093,29.5 M86.5093,48.5 L73.5093,63.5 M86.5093,48.5 L99.5093,63.5"
															fill="none" style="stroke:#181818;stroke-width:0.5;" />
													</g>
													<g class="participant participant-tail" data-participant="u"><text fill="#000000" font-family="sans-serif"
															font-size="14" lengthAdjust="spacing" textLength="127.0186" x="20" y="961.2295">Пользователь УД</text>
														<ellipse cx="86.5093" cy="973.0313" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;" />
														<path
															d="M86.5093,981.0313 L86.5093,1008.0313 M73.5093,989.0313 L99.5093,989.0313 M86.5093,1008.0313 L73.5093,1023.0313 M86.5093,1008.0313 L99.5093,1023.0313"
															fill="none" style="stroke:#181818;stroke-width:0.5;" />
													</g>
													<g class="participant participant-head" data-participant="f">
														<rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198.4336"
															x="243.5161" y="50" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing"
															textLength="184.4336" x="250.5161" y="69.9951">Клиентское приложение</text>
													</g>
													<g class="participant participant-tail" data-participant="f">
														<rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198.4336"
															x="243.5161" y="948.2344" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing"
															textLength="184.4336" x="250.5161" y="968.2295">Клиентское приложение</text>
													</g>
													<g class="participant participant-head" data-participant="b">
														<rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.1094"
															x="536.5894" y="50" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing"
															textLength="77.1094" x="543.5894" y="69.9951">Бэкенд УД</text>
													</g>
													<g class="participant participant-tail" data-participant="b">
														<rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.1094"
															x="536.5894" y="948.2344" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing"
															textLength="77.1094" x="543.5894" y="968.2295">Бэкенд УД</text>
													</g>
													<g class="participant participant-head" data-participant="e">
														<rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.1563"
															x="900.4282" y="50" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing"
															textLength="46.1563" x="907.4282" y="69.9951">EStore</text>
													</g>
													<g class="participant participant-tail" data-participant="e">
														<rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.1563"
															x="900.4282" y="948.2344" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing"
															textLength="46.1563" x="907.4282" y="968.2295">EStore</text>
													</g>
													<g>
														<title>.......... ..........</title>
														<rect fill="#FFFFFF" height="827.8047" style="stroke:#181818;stroke-width:1;" width="10" x="337.7329"
															y="112.4297" />
													</g>
													<g>
														<title>...... ..</title>
														<rect fill="#FFFFFF" height="286.9375" style="stroke:#181818;stroke-width:1;" width="10" x="577.144" y="185.8281" />
													</g>
													<g>
														<title>...... ..</title>
														<rect fill="#FFFFFF" height="357.0703" style="stroke:#181818;stroke-width:1;" width="10" x="577.144" y="538.0313" />
													</g>
													<g>
														<title>EStore</title>
														<rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="925.5063" y="633.4297" />
													</g>
													<g class="message" data-participant-1="u" data-participant-2="f">
														<polygon fill="#181818" points="325.7329,108.4297,335.7329,112.4297,325.7329,116.4297,329.7329,112.4297"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="86.5093" x2="331.7329" y1="112.4297" y2="112.4297" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="9.0454" x="93.5093" y="107.3638">1</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="219.1782" x="106.5547" y="107.3638">Открывает страницу
															"События"</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="u">
														<polygon fill="#181818" points="97.5093,152.6953,87.5093,156.6953,97.5093,160.6953,93.5093,156.6953"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="91.5093" x2="336.7329" y1="156.6953" y2="156.6953" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="9.0454" x="103.5093" y="144.063">2</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="153.8037" x="116.5547" y="136.4966">Отображает
															страницу</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing"
															textLength="201.7666" x="116.5547" y="151.6294">с заполнителями и лоадером</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="b">
														<polygon fill="#181818" points="565.144,181.8281,575.144,185.8281,565.144,189.8281,569.144,185.8281"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="347.7329" x2="571.144" y1="185.8281" y2="185.8281" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="9.0454" x="354.7329" y="180.7622">3</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="160.1069" x="367.7783" y="180.7622">GET
															api/v3/events/filters</text>
													</g>
													<path d="M10,200.8281 L74.4429,200.8281 L74.4429,207.9609 L64.4429,217.9609 L10,217.9609 L10,200.8281" fill="#EEEEEE"
														style="stroke:#000000;stroke-width:1.5;" />
													<rect fill="none" height="309.0703" style="stroke:#000000;stroke-width:1.5;" width="864.8247" x="10" y="200.8281" />
													<text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
														textLength="19.4429" x="25" y="213.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11"
														font-weight="bold" lengthAdjust="spacing" textLength="47.2119" x="89.4429" y="213.0386">[Успех]</text>
													<g class="message" data-participant-1="b" data-participant-2="b">
														<line style="stroke:#181818;stroke-width:1;" x1="587.144" x2="629.144" y1="254.2266" y2="254.2266" />
														<line style="stroke:#181818;stroke-width:1;" x1="629.144" x2="629.144" y1="254.2266" y2="267.2266" />
														<line style="stroke:#181818;stroke-width:1;" x1="588.144" x2="629.144" y1="267.2266" y2="267.2266" />
														<polygon fill="#181818" points="598.144,263.2266,588.144,267.2266,598.144,271.2266,594.144,267.2266"
															style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13"
															font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="594.144" y="241.5942">4</text><text
															fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241.5029" x="607.1895"
															y="234.0278">Формирует ответ по данным из БД</text><text fill="#000000" font-family="sans-serif" font-size="13"
															lengthAdjust="spacing" textLength="201.3096" x="607.1895" y="249.1606">(events_groups и event_types)</text>
													</g>
													<g class="message" data-participant-1="b" data-participant-2="f">
														<polygon fill="#181818" points="358.7329,292.3594,348.7329,296.3594,358.7329,300.3594,354.7329,296.3594"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="352.7329" x2="576.144" y1="296.3594"
															y2="296.3594" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold"
															lengthAdjust="spacing" textLength="9.0454" x="364.7329" y="291.2935">5</text><text fill="#000000"
															font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.3657" x="377.7783"
															y="291.2935">Ответ со списком фильтров</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="u">
														<polygon fill="#181818" points="97.5093,336.625,87.5093,340.625,97.5093,344.625,93.5093,340.625"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="91.5093" x2="336.7329" y1="340.625" y2="340.625" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="9.0454" x="103.5093" y="327.9927">6</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="136.4238" x="116.5547" y="320.4263">Отображает
															список</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing"
															textLength="137.0649" x="116.5547" y="335.5591">активных фильтров</text>
													</g>
													<line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="874.8247" y1="349.625" y2="349.625" />
													<text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
														textLength="142.8174" x="15" y="359.8354">[Ошибка по таймауту]</text>
													<g class="message" data-participant-1="b" data-participant-2="f">
														<polygon fill="#181818" points="358.7329,395.6953,348.7329,399.6953,358.7329,403.6953,354.7329,399.6953"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:2;" x1="559.144" x2="569.144" y1="394.6953" y2="404.6953" />
														<line style="stroke:#181818;stroke-width:2;" x1="559.144" x2="569.144" y1="404.6953" y2="394.6953" />
														<line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="352.7329" x2="564.144" y1="399.6953"
															y2="399.6953" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold"
															lengthAdjust="spacing" textLength="38.7461" x="364.7329" y="387.063">[5а1]</text><text fill="#000000"
															font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.9692" x="407.479"
															y="379.4966">Превышено время</text><text fill="#000000" font-family="sans-serif" font-size="13"
															lengthAdjust="spacing" textLength="120.6943" x="407.479" y="394.6294">ожидания ответа</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="u">
														<polygon fill="#181818" points="97.5093,424.8281,87.5093,428.8281,97.5093,432.8281,93.5093,428.8281"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="91.5093" x2="336.7329" y1="428.8281" y2="428.8281" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="38.7461" x="103.5093" y="423.7622">[5а2]</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="141.2354" x="146.2554" y="423.7622">Отображает ошибку</text>
													</g>
													<line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="874.8247" y1="437.8281" y2="437.8281" />
													<text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
														textLength="182.2144" x="15" y="448.0386">[Ошибка запроса фильтров]</text>
													<g class="message" data-participant-1="b" data-participant-2="f">
														<polygon fill="#181818" points="358.7329,468.7656,348.7329,472.7656,358.7329,476.7656,354.7329,472.7656"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="352.7329" x2="581.144" y1="472.7656"
															y2="472.7656" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold"
															lengthAdjust="spacing" textLength="39.0508" x="364.7329" y="467.6997">[5б1]</text><text fill="#000000"
															font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.019" x="407.7837"
															y="467.6997">Ответ с ошибкой</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="u">
														<polygon fill="#181818" points="97.5093,497.8984,87.5093,501.8984,97.5093,505.8984,93.5093,501.8984"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="91.5093" x2="336.7329" y1="501.8984" y2="501.8984" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="39.0508" x="103.5093" y="496.8325">[5б2]</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="141.2354" x="146.5601" y="496.8325">Отображает ошибку</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="b">
														<polygon fill="#181818" points="565.144,534.0313,575.144,538.0313,565.144,542.0313,569.144,538.0313"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="347.7329" x2="571.144" y1="538.0313" y2="538.0313" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="9.0454" x="354.7329" y="532.9653">7</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="126.75" x="367.7783" y="532.9653">POST api/v3/events</text>
													</g>
													<path d="M10,553.0313 L74.4429,553.0313 L74.4429,560.1641 L64.4429,570.1641 L10,570.1641 L10,553.0313" fill="#EEEEEE"
														style="stroke:#000000;stroke-width:1.5;" />
													<rect fill="none" height="379.2031" style="stroke:#000000;stroke-width:1.5;" width="960.5845" x="10" y="553.0313" />
													<text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
														textLength="19.4429" x="25" y="566.0981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11"
														font-weight="bold" lengthAdjust="spacing" textLength="47.2119" x="89.4429" y="565.2417">[Успех]</text>
													<g class="message" data-participant-1="b" data-participant-2="b">
														<line style="stroke:#181818;stroke-width:1;" x1="587.144" x2="629.144" y1="591.2969" y2="591.2969" />
														<line style="stroke:#181818;stroke-width:1;" x1="629.144" x2="629.144" y1="591.2969" y2="604.2969" />
														<line style="stroke:#181818;stroke-width:1;" x1="588.144" x2="629.144" y1="604.2969" y2="604.2969" />
														<polygon fill="#181818" points="598.144,600.2969,588.144,604.2969,598.144,608.2969,594.144,604.2969"
															style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13"
															font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="594.144" y="586.231">8</text><text
															fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.7417" x="607.1895"
															y="586.231">формирует запрос в EStore</text>
													</g>
													<g class="message" data-participant-1="b" data-participant-2="e">
														<polygon fill="#181818" points="913.5063,629.4297,923.5063,633.4297,913.5063,637.4297,917.5063,633.4297"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="587.144" x2="919.5063" y1="633.4297" y2="633.4297" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="9.0454" x="594.144" y="628.3638">9</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="228.249" x="607.1895" y="628.3638">POST
															api/estore/events/by_devices</text>
													</g>
													<g class="message" data-participant-1="e" data-participant-2="b">
														<polygon fill="#181818" points="598.144,658.5625,588.144,662.5625,598.144,666.5625,594.144,662.5625"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="592.144" x2="929.5063" y1="662.5625" y2="662.5625" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="18.0908" x="604.144" y="657.4966">10</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="183.2441" x="626.2349" y="657.4966">Ответ со списком
															событий</text>
													</g>
													<g class="message" data-participant-1="b" data-participant-2="b">
														<line style="stroke:#181818;stroke-width:1;" x1="587.144" x2="629.144" y1="691.6953" y2="691.6953" />
														<line style="stroke:#181818;stroke-width:1;" x1="629.144" x2="629.144" y1="691.6953" y2="704.6953" />
														<line style="stroke:#181818;stroke-width:1;" x1="588.144" x2="629.144" y1="704.6953" y2="704.6953" />
														<polygon fill="#181818" points="598.144,700.6953,588.144,704.6953,598.144,708.6953,594.144,704.6953"
															style="stroke:#181818;stroke-width:1;" /><text fill="#000000" font-family="sans-serif" font-size="13"
															font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="594.144" y="686.6294">11</text><text
															fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292.2715" x="616.2349"
															y="686.6294">Обогащает полученные события данными</text>
													</g>
													<g class="message" data-participant-1="b" data-participant-2="f">
														<polygon fill="#181818" points="358.7329,729.8281,348.7329,733.8281,358.7329,737.8281,354.7329,733.8281"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="352.7329" x2="576.144" y1="733.8281" y2="733.8281" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="18.0908" x="364.7329" y="728.7622">12</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="183.2441" x="386.8237" y="728.7622">Ответ со списком
															событий</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="u">
														<polygon fill="#181818" points="97.5093,758.9609,87.5093,762.9609,97.5093,766.9609,93.5093,762.9609"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="91.5093" x2="336.7329" y1="762.9609" y2="762.9609" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="18.0908" x="103.5093" y="757.895">13</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="198.4087" x="125.6001" y="757.895">Отображает список
															событий</text>
													</g>
													<line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="970.5845" y1="771.9609" y2="771.9609" />
													<text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
														textLength="142.8174" x="15" y="782.1714">[Ошибка по таймауту]</text>
													<g class="message" data-participant-1="b" data-participant-2="f">
														<polygon fill="#181818" points="358.7329,818.0313,348.7329,822.0313,358.7329,826.0313,354.7329,822.0313"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:2;" x1="559.144" x2="569.144" y1="817.0313" y2="827.0313" />
														<line style="stroke:#181818;stroke-width:2;" x1="559.144" x2="569.144" y1="827.0313" y2="817.0313" />
														<line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="352.7329" x2="564.144" y1="822.0313"
															y2="822.0313" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold"
															lengthAdjust="spacing" textLength="47.7915" x="364.7329" y="809.3989">[11а1]</text><text fill="#000000"
															font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.9692" x="416.5244"
															y="801.8325">Превышено время</text><text fill="#000000" font-family="sans-serif" font-size="13"
															lengthAdjust="spacing" textLength="120.6943" x="416.5244" y="816.9653">ожидания ответа</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="u">
														<polygon fill="#181818" points="97.5093,847.1641,87.5093,851.1641,97.5093,855.1641,93.5093,851.1641"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="91.5093" x2="336.7329" y1="851.1641" y2="851.1641" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="47.7915" x="103.5093" y="846.0981">[11а2]</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="141.2354" x="155.3008" y="846.0981">Отображает ошибку</text>
													</g>
													<line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="970.5845" y1="860.1641" y2="860.1641" />
													<text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
														textLength="173.3091" x="15" y="870.3745">[Ошибка запроса событий]</text>
													<g class="message" data-participant-1="b" data-participant-2="f">
														<polygon fill="#181818" points="358.7329,891.1016,348.7329,895.1016,358.7329,899.1016,354.7329,895.1016"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="352.7329" x2="581.144" y1="895.1016"
															y2="895.1016" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold"
															lengthAdjust="spacing" textLength="48.0962" x="364.7329" y="890.0356">[11б1]</text><text fill="#000000"
															font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.019" x="416.8291"
															y="890.0356">Ответ с ошибкой</text>
													</g>
													<g class="message" data-participant-1="f" data-participant-2="u">
														<polygon fill="#181818" points="97.5093,920.2344,87.5093,924.2344,97.5093,928.2344,93.5093,924.2344"
															style="stroke:#181818;stroke-width:1;" />
														<line style="stroke:#181818;stroke-width:1;" x1="91.5093" x2="336.7329" y1="924.2344" y2="924.2344" /><text
															fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
															textLength="48.0962" x="103.5093" y="919.1685">[11б2]</text><text fill="#000000" font-family="sans-serif"
															font-size="13" lengthAdjust="spacing" textLength="141.2354" x="155.6055" y="919.1685">Отображает ошибку</text>
													</g>
													<!--SRC=[rLJ1JXDH5DtFLxnqWou84cDCY271XBWock1E3PbfRyd4CZFEcocoewqe1WmnOUK2OlG3XagXb59-uRu_yhmtKsPe8JI6XJPDEhrpxxddddVka-zSBx13UrM490FVa_ISfBHNw2dL_BM5CFJNH1J6P4t9oqn9xsFooiFCXPgxuecA6r8vSdtFikF8z-9LXqBBiknov8UYn0Syu3ErmoVuRNEYcjpH_mN_vBsIiAM8BO17RjaDR2z2mNS-uowIpbLJDRY7iexW2xM1u1d-7EjNEi4KLqUAlwclAD4PHta7nvggs97js99q2YSWamW-miCvscohpJotubn1N5p25AHVa6N5OdfULES4xsEAdjfGsteYxgYcK0smtJ20NVL9jT3d1yWU0ho9o6v9w-7MxOX0kQfnuWn79-d2uvkGtdYg8JHZlj1IcdWguYxtkIlqLmkJOA0EAWVS5saBPquyMtmbxC2TgJ-SeJfvaPofkhM8GfdpSN1MjGWAGEqB86nQ0Xyd0-1VF00e6c7Ubc68G1E3cqTGAWY9pZYP4m6Dzy3xNjfoUINquq1geYQm7Aq79EyFsnGqRMSA0DIGwMO6w0lrKH-_sZ7Qm4Yc-1OTCu01zy05qPu-2lH8JtmCaMgm1w2s43z4soIT3aK9dqA0HBMGspATSwSB6Vd1QApqn9b__OYJ1szBsPGVfgVDb0Terk4s66mPbqAzjWdrrQvcgVtTpGI5RGfQStBxpCZEsD_0yvePZR6q190gkLxdoQOzpAUzxamBv01yQZ8hL73X7KpdLQp29IGUNwx1onTB8timgVyXo9Z_2vBX-B8x8g-YGZ-I-jrmzvprvGhLtJB9bF-GGbfCmvMxPHKQ-SKohYDTtTvzo3NWtp3lbw6AvXQ1bpyR0-gjxLp1rAuhR3HtSyJgtv2RV4j7Ykzw8MTd_ykD75Tqmc7_YONy0m00]-->
												</g>
											</svg>
										</div>
									</section>
									<div class="code-container">
										<div class="code-header">
											<span class="code-language">PlantUML</span>
											<button class="copy-btn" onclick="copyCode(this)">Копировать</button>
										</div>
										<pre><code class="language-plantuml">
@startuml
skinparam responseMessageBelowArrow true
'skinparam sequenceMessageAlign direction
autonumber

actor "Пользователь УД" as u
participant "Клиентское приложение" as f
participant "Бэкенд УД" as b
'database "База данных УД" as db
participant EStore as e

u -> f: Открывает страницу "События"
activate f
f -> u: Отображает страницу \nс заполнителями и лоадером 
f -> b: GET api/v3/events/filters
activate b

alt Успех
	b -> b: Формирует ответ по данным из БД \n(events_groups и event_types)
	b --> f: Ответ со списком фильтров
	f -> u: Отображает список \nактивных фильтров
else Ошибка по таймауту
	autonumber stop
	autonumber "&lt;b>[5а0]"
	b x-- f: Превышено время \nожидания ответа
	f -> u: Отображает ошибку
	autonumber stop
else Ошибка запроса фильтров
	autonumber stop
	autonumber "&lt;b>[5б0]"
	b --> f: Ответ с ошибкой
	deactivate b
	f -> u: Отображает ошибку
	autonumber stop
end

autonumber 7
f -> b: POST api/v3/events
activate b

alt Успех
	b -> b: формирует запрос в EStore
	b -> e: POST api/estore/events/by_devices
	activate e
	e -> b: Ответ со списком событий
	deactivate e
	b -> b: Обогащает полученные события данными
	b -> f: Ответ со списком событий
	f -> u: Отображает список событий
else Ошибка по таймауту
	autonumber stop
	autonumber "&lt;b>[11а0]"
	b x-- f: Превышено время \nожидания ответа
	f -> u: Отображает ошибку
	autonumber stop
else Ошибка запроса событий
	autonumber stop
	autonumber "&lt;b>[11б0]"
	b --> f: Ответ с ошибкой
	deactivate b
	f -> u: Отображает ошибку
	autonumber stop
end
@enduml
										</code></pre>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<hr>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!--	Функциональные требования					-->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<a name="Bookmark4000"></a>
										<h1 style="text-decoration: none;" id="Bookmark4000"><span class="nh-number">Функциональные требования</span></h1>
										<ol>
											<li>Критические события (метод <a href="/portfolio/pages/portofolio/api/postevents.html">POST api/v3/events</a>, параметр <strong>events.level = critical</strong>) должны подсвечиваться красной точкой рядом с текстом события.</li>
											<li>Если по установленным фильтрам у пользователя нет событий, должен отображаться текст «Нет событий».</li>
											<li>Настройки фильтров по умолчанию:
												<ol>
													<li>Дата события: текущие сутки;</li>
													<li>Время события: 00:00 — 23:59;</li>
													<li>Вид событий: Все виды событий;</li>
													<li>Устройства: Все устройства;</li>
													<li>Тип событий: Все типы событий.</li>
												</ol>
											</li>
											<li>Дата: при нажатии должен открываться календарь, где можно:
												<ol>
													<li>выбрать дату, по умолчанию стоит текущая дата;</li>
													<li>выбрать месяц (кнопки переключения вперед/назад);</li>
													<li>выбрать год (выпадающая панель).</li>
												</ol>
											</li>
											<li>При появлении нового события в боковом меню напротив раздела «События» должна появляться точка. При нажатии на раздел «События» и просмотре новых событий подсветка (точка) пропадает.</li>
											<li>Если у пользователя установлена финансовая блокировка, не должны отображаться события камер.</li>
											<li>Если камера в промопериоде, то события по такой камере продолжают приходить до тех пор, пока не закончится промопериод. После выхода камеры из промопериода проводится проверка, находится ли аккаунт в финансовой блокировке. Если аккаунт в финансовой блокировке, отправка событий по камере приостанавливается.</li>
										</ol>
										<p>Карточка события формируется из данных, возвращённых в ответе на запрос <a href="/portfolio/pages/portofolio/api/postevents.html">POST api/v3/events</a>:</p>
										<ul>
											<li>Наименование события - поле message;</li>
											<li>Иконка события - хранится локально на фронте и подставляется на основании поля icon (метод POST api/v3/events, параметр events.icon);</li>
											<li>Дата события - Время события - указывается на основании поля update_at;</li>
											<li>Ссылка на устройство (если есть устройство, вид ссылки <b>/devices/{origin_id}</b>):
												<ol>
													<li>origin_type = Device::Camera;</li>
													<li>origin_type = Device::Zwave;</li>
												</ol>
											</li>
											<li>Если origin_type = Device::Camera:
												<ol>
													<li>ЛК УД: В рамках первого этапа меняем скриншот на «шеврон» (иконка [>]) в адаптиве, т.к. пока не умеем переходить к конкретному событию;</li>
													<li>МП УД: справа должен быть скриншот события;</li>
												</ol>
											</li>
											<li>Если <b>origin_type = Device</b> справа должна быть иконка «шеврон».</li>
										</ul>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<hr>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!--	Нефункциональные требования					-->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<a name="Bookmark2000"></a>
										<h1 id="Bookmark2000">Нефункциональные требования</h1>
										<!---------------------------------------------------->
										<!-- ##	Требования к интерфейсу пользователя		-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Требования к интерфейсу пользователя</h2>
										<!---------------------------------------------------->
										<!-- ###	Таблица 1								-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h3 id="Bookmark2100">Таблица 1 — Элементы интерфейса страницы «События» (ЛК УД)</h3>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<tbody>
													<tr>
														<th class="confluenceTh">Элемент интерфейса</th>
														<th class="confluenceTh"></th>
														<th class="confluenceTh"></th>
														<th class="confluenceTh">Описание</th>
														<th class="confluenceTh">Данные</th>
														<th class="confluenceTh">Валидация</th>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">Дата</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Отображается в виде текста формата <b>День недели дд.мм.гггг</b></td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр <b>date_from</b></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">Список событий</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Список карточек событий, подходящих под установленные фильтры</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Карточка события</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Блок с информацией о событии</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Иконка события</td>
														<td class="confluenceTd" style="padding: 0.5em;">В зависимости от типа события отображается</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.icon</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Текст события</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.message</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Дата события</td>
														<td class="confluenceTd" style="padding: 0.5em;">Дата и время события</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.extra.begin</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Название устройства</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.origin_id</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events events.origin_type = Device::Camera и events.origin_type = Device</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Ссылка на устройство</td>
														<td class="confluenceTd" style="padding: 0.5em;">По нажатии на событие открывается страница устройства</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.origin_id</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events events.origin_type = Device::Camera и events.origin_type = Device</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">Фильтры по событиям</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Фильтры для настройки условий отображения событий. Подробное описание здесь: Настройка фильтров событий</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
												</tbody>
											</table>
										</div>
										<!---------------------------------------------------->
										<!-- ###	Таблица 2								-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h3 id="Bookmark2100">Таблица 2 — Элементы интерфейса экрана «События» (МП УД)</h3>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<tbody>
													<tr>
														<th class="confluenceTh">Элемент интерфейса</th>
														<th class="confluenceTh"></th>
														<th class="confluenceTh"></th>
														<th class="confluenceTh">Описание</th>
														<th class="confluenceTh">Данные</th>
														<th class="confluenceTh">Валидация</th>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">Кнопка Колокольчик</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">По кнопке открывается экран «Уведомления»</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод GET /api/v2/notifications</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">Фильтры по событиям</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Фильтры для настройки условий отображения событий. Подробное описание здесь: Настройка фильтров событий</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">Список событий</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Список карточек событий, подходящих под установленные фильтры</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Карточка события</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Блок с информацией о событии</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Иконка события</td>
														<td class="confluenceTd" style="padding: 0.5em;">В зависимости от типа события отображается</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.icon</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Текст события</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.message</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Дата события</td>
														<td class="confluenceTd" style="padding: 0.5em;">Дата и время события</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.extra.begin</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Название устройства</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.origin_id</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events events.origin_type = Device::Camera и events.origin_type = Device</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Ссылка на устройство</td>
														<td class="confluenceTd" style="padding: 0.5em;">По нажатии на событие открывается страница устройства. По нажатии на событие камеры открывается это событие в плеере камеры</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events, параметр events.origin_id</td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events events.origin_type = Device::Camera и events.origin_type = Device</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Превью камеры</td>
														<td class="confluenceTd" style="padding: 0.5em;">Отображается в карточке события камеры справа от основной информации о событии</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Метод POST api/v3/events events.origin_type = Device::Camera</td>
													</tr>
													<tr>
														<td class="confluenceTd" style="padding: 0.5em;">Фильтры по событиям</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;">Фильтры для настройки условий отображения событий. Подробное описание здесь: Настройка фильтров событий</td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
														<td class="confluenceTd" style="padding: 0.5em;"></td>
													</tr>
												</tbody>
											</table>
										</div>
										<!---------------------------------------------------->
										<!-- ##	Макеты										-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Макеты</h2>
										<p>Макеты ЛК УД (Web): https://www.figma.com/design/HRrRCYSTtqxPSmAgnBUrPf/%D0%90%D0%BD%D0%B4%D1%80%D0%B5%D0%B9-%D0%93%D0%BE%D0%B2%D0%BE%D1%80%D0%BE%D0%B2-s-team-library?node-id=2311-27413&t=1kX1Y1xjDreJpCJp-4</p>
										<p>Макеты МП УД (Android): https://www.figma.com/design/HRrRCYSTtqxPSmAgnBUrPf/%D0%90%D0%BD%D0%B4%D1%80%D0%B5%D0%B9-%D0%93%D0%BE%D0%B2%D0%BE%D1%80%D0%BE%D0%B2-s-team-library?node-id=2311-150674&t=1kX1Y1xjDreJpCJp-4</p>
										<p>Макеты МП УД (iOS): https://www.figma.com/design/HRrRCYSTtqxPSmAgnBUrPf/%D0%90%D0%BD%D0%B4%D1%80%D0%B5%D0%B9-%D0%93%D0%BE%D0%B2%D0%BE%D1%80%D0%BE%D0%B2-s-team-library?node-id=2311-159524&t=1kX1Y1xjDreJpCJp-4</p>
										<!---------------------------------------------------->
										<!-- ##	Требования к разграничению доступа			-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Требования к разграничению доступа</h2>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<thead>
													<tr>
														<th class="confluenceTh" rowspan="2">Функция</th>
														<th class="confluenceTh" colspan="3">Владелец УД (owner)</th>
														<th class="confluenceTh" colspan="3">Пользователь с правами полного управления (adult)</th>
														<th class="confluenceTh" colspan="3">Пользователь с правами ограниченного управления (child)</th>
														<th class="confluenceTh" colspan="3">Пользователь с правами демо-режима (demo)</th>
													</tr>
													<tr>
														<th class="confluenceTh">Web</th>
														<th class="confluenceTh">iOS</th>
														<th class="confluenceTh">Android</th>
														<th class="confluenceTh">Web</th>
														<th class="confluenceTh">iOS</th>
														<th class="confluenceTh">Android</th>
														<th class="confluenceTh">Web</th>
														<th class="confluenceTh">iOS</th>
														<th class="confluenceTh">Android</th>
														<th class="confluenceTh">Web</th>
														<th class="confluenceTh">iOS</th>
														<th class="confluenceTh">Android</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td class="confluenceTd">Просмотр событий</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Функциональность отсутствует</td>
														<td class="confluenceTd">Нет доступа</td>
														<td class="confluenceTd">Нет доступа</td>
													</tr>
													<tr>
														<td class="confluenceTd">Управление фильтрами</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Функциональность отсутствует</td>
														<td class="confluenceTd">Нет доступа</td>
														<td class="confluenceTd">Нет доступа</td>
													</tr>
													<tr>
														<td class="confluenceTd">Переход к устройству</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Есть доступ</td>
														<td class="confluenceTd">Функциональность отсутствует</td>
														<td class="confluenceTd">Нет доступа</td>
														<td class="confluenceTd">Нет доступа</td>
													</tr>
												</tbody>
											</table>
										</div>
										<!---------------------------------------------------->
										<!-- ##	Требования к метрикам						-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Требования к метрикам для аналитики продукта</h2>
										<!---------------------------------------------------->
										<!-- ###	Метрики web								-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h3 id="Bookmark2100">Метрики web</h3>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<thead>
													<tr>
														<th class="confluenceTh">Триггер</th>
														<th class="confluenceTh">Название web</th>
														<th class="confluenceTh">Доп.параметры</th>
														<th class="confluenceTh">Значения доп.параметров</th>
														<th class="confluenceTh">Что меряем</th>
														<th class="confluenceTh">Скриншот/ доп. описание</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td class="confluenceTd">Клик по пункту меню</td>
														<td class="confluenceTd">menu_item</td>
														<td class="confluenceTd">[<i>menu_item</i>]</td>
														<td class="confluenceTd">
															<ul>menu_item:
																<li>dashboard</li>
																<li>devices</li>
																<li><b>events</b></li>
																<li>rules</li>
																<li>subscriptions</li>
																<li>balance</li>
																<li>settings</li>
																<li>help</li>
															</ul>
														</td>
														<td class="confluenceTd">Кол-во нажатий на пункт меню (добавляем "События")</td>
														<td class="confluenceTd">Измеряет удобство меню</td>
													</tr>
													<tr>
														<td class="confluenceTd">Открытие страницы событий</td>
														<td class="confluenceTd">events_opened</td>
														<td class="confluenceTd"></td>
														<td class="confluenceTd"></td>
														<td class="confluenceTd">Кол-во открытий раздела "События"</td>
														<td class="confluenceTd">Измеряет востребованность раздела</td>
													</tr>
													<tr>
														<td class="confluenceTd">Клик по фильтру</td>
														<td class="confluenceTd">events_filter_click</td>
														<td class="confluenceTd">[<i>filter_type</i>]</td>
														<td class="confluenceTd">
															<ul>filter_type:
																<li>event_data</li>
																<li>event_time</li>
																<li>event_groups</li>
																<li>event_types</li>
																<li>devices</li>
															</ul>
														</td>
														<td class="confluenceTd">Кол-во использований фильтров</td>
														<td class="confluenceTd">Показывает востребованность фильтров</td>
													</tr>
													<tr>
														<td class="confluenceTd">Применение фильтров</td>
														<td class="confluenceTd">events_filters-apply_click</td>
														<td class="confluenceTd">[<i>filters_count</i>]-[<i>filters_list</i>]</td>
														<td class="confluenceTd">3, [event_groups, event_types, devices]</td>
														<td class="confluenceTd">Кол-во завершений настроек фильтров</td>
														<td class="confluenceTd">Помогает анализировать сегментацию аудитории</td>
													</tr>
													<tr>
														<td class="confluenceTd">Очистка фильтров</td>
														<td class="confluenceTd">events_filters-clear_click</td>
														<td class="confluenceTd"></td>
														<td class="confluenceTd"></td>
														<td class="confluenceTd">Кол-во сбросов настроек фильтрации</td>
														<td class="confluenceTd">Показывает частоту сброса настроек</td>
													</tr>
													<tr>
														<td class="confluenceTd">Сброс фильтра</td>
														<td class="confluenceTd">events_filter-reset_click</td>
														<td class="confluenceTd">[<i>filter_type</i>]</td>
														<td class="confluenceTd">
															<ul>filter_type:
																<li>event_data</li>
																<li>event_time</li>
																<li>event_groups</li>
																<li>event_types</li>
																<li>devices</li>
															</ul>
														</td>
														<td class="confluenceTd">Кол-во возвратов фильтра к исходным настройкам</td>
														<td class="confluenceTd">Помогает оценить удобство работы с интерфейсом</td>
													</tr>
													<tr>
														<td class="confluenceTd">Клик по событию</td>
														<td class="confluenceTd">events_event-element_click</td>
														<td class="confluenceTd">[<i>event_type</i>]</td>
														<td class="confluenceTd"><a href="/portfolio/pages/portofolio/database/event_types.html">event_types</a></td>
														<td class="confluenceTd">Кол-во кликов по событиям</td>
														<td class="confluenceTd">Помогает определить востребованные события</td>
													</tr>
													<tr>
														<td class="confluenceTd">Успешный запрос фильтров API</td>
														<td class="confluenceTd">events_get-filters_api-success</td>
														<td class="confluenceTd">[<i>response_time</i>]</td>
														<td class="confluenceTd">150ms, 200ms, 300ms</td>
														<td class="confluenceTd">Кол-во успешных загрузок фильтров</td>
														<td class="confluenceTd">Мониторинг производительности API</td>
													</tr>
													<tr>
														<td class="confluenceTd">Ошибка запроса фильтров API</td>
														<td class="confluenceTd">events_get-filters_api-failed</td>
														<td class="confluenceTd">[<i>error_code</i>]-[<i>error_message</i>]</td>
														<td class="confluenceTd">404-Not Found, 404703-Недоступен список фильтров</td>
														<td class="confluenceTd">Проблемы с загрузкой фильтров</td>
														<td class="confluenceTd">Выявление проблем API</td>
													</tr>
													<tr>
														<td class="confluenceTd">Успешный запрос событий API</td>
														<td class="confluenceTd">events_post-events_api-success</td>
														<td class="confluenceTd">events_count</td>
														<td class="confluenceTd">20</td>
														<td class="confluenceTd">Кол-во успешных запросов событий API</td>
														<td class="confluenceTd">Мониторинг производительности API</td>
													</tr>
													<tr>
														<td class="confluenceTd">Ошибка запроса событий API</td>
														<td class="confluenceTd">events_post-events_api-failed</td>
														<td class="confluenceTd">[<i>error_code</i>]-[<i>error_message</i>]</td>
														<td class="confluenceTd">404-Not Found</td>
														<td class="confluenceTd">Проблемы с загрузкой событий API</td>
														<td class="confluenceTd">Выявление проблем API</td>
													</tr>
												</tbody>
											</table>
										</div>
										<!---------------------------------------------------->
										<!-- ###	Метрики mobile							-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h3 id="Bookmark2100">Метрики mobile</h3>
										<!---------------------------------------------------->
										<!-- ####	Экраны firebase							-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h3 id="Bookmark2100">Экраны firebase</h3>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<thead>
													<tr>
														<th class="confluenceTh">№ <br>п/п</th>
														<th class="confluenceTh">Название экрана</th>
														<th class="confluenceTh">Firebase</th>
														<th class="confluenceTh">Комментарий</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td class="confluenceTd"><b>1</b></td>
														<td class="confluenceTd">Экран "События и уведомления"</td>
														<td class="confluenceTd">screen_events_open</td>
														<td class="confluenceTd"></td>
													</tr>
												</tbody>
											</table>
										</div>
										<!---------------------------------------------------->
										<!-- ####	События firebase						-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h3 id="Bookmark2100">События firebase</h3>
										<div class="table-wrap">
											<table class="confluenceTable" style="font-size:1.0em">
												<thead>
													<tr>
														<th class="confluenceTh">Название события</th>
														<th class="confluenceTh">Название метрики</th>
														<th class="confluenceTh">Доп. параметры</th>
														<th class="confluenceTh">Значения доп.параметров</th>
														<th class="confluenceTh">Комментарий</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td class="confluenceTd">Тап по пункту "События" в таб-баре</td>
														<td class="confluenceTd"><span class="metric-name">action_menu_events_tap</span></td>
														<td class="confluenceTd"></td>
														<td class="confluenceTd"class="param-values"></td>
														<td class="confluenceTd">Отслеживание навигации пользователя. Помогает определить востребованность раздела.</td>
													</tr>
													<tr>
														<td class="confluenceTd">Тап по фильтру событий</td>
														<td class="confluenceTd"><span class="metric-name">action_events_filter_tap</span></td>
														<td class="confluenceTd">[<i>filter_type</i>]</td>
														<td class="confluenceTd">
															<ul>filter_type:
																<li>event_data</li>
																<li>event_time</li>
																<li>event_groups</li>
																<li>event_types</li>
																<li>devices</li>
															</ul>
														</td>
														<td class="confluenceTd">Измерение взаимодействия с фильтрами. Показывает, какие параметры фильтрации наиболее востребованы.</td>
													</tr>
													<tr>
														<td class="confluenceTd">Применение фильтра</td>
														<td class="confluenceTd"><span class="metric-name">action_events_filter-apply_tap</span></td>
														<td class="confluenceTd">[<i>filter_type</i>]-[<i>filter_value</i>]</td>
														<td class="confluenceTd">devices-camera, devices-controller</td>
														<td class="confluenceTd">Фиксация момента применения фильтров. Анализ среднего количества используемых фильтров. При фильтрации по конкретному устройству, записывать только тип устройства без uuid. При фильтрации по дате и времени, записывать только тип фильтра.</td>
													</tr>
													<tr>
														<td class="confluenceTd">Очистка фильтра</td>
														<td class="confluenceTd"><span class="metric-name">action_events_filter-clear_tap</span></td>
														<td class="confluenceTd">[<i>filter_type</i>]</td>
														<td class="confluenceTd"></td>
														<td class="confluenceTd">Отслеживание сброса отдельных фильтров. Помогает понять, какие фильтры пользователи чаще сбрасывают.</td>
													</tr>
													<tr>
														<td class="confluenceTd">Сброс всех фильтров</td>
														<td class="confluenceTd"><span class="metric-name">action_events_filters-clear_tap</span></td>
														<td class="confluenceTd"></td>
														<td class="confluenceTd"></td>
														<td class="confluenceTd">Фиксация полного сброса фильтров. Показывает частоту возврата к исходным настройкам.</td>
													</tr>
													<tr>
														<td class="confluenceTd">Тап по событию в списке</td>
														<td class="confluenceTd"><span class="metric-name">action_event-element_tap</span></td>
														<td class="confluenceTd">[<i>event_type</i>]</td>
														<td class="confluenceTd"><a href="/portfolio/pages/portofolio/database/event_types.html">event_types</a></td>
														<td class="confluenceTd">Помогает определить востребованные события.</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<hr>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!--	Приложения									-->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<a name="Bookmark2000"></a>
										<h1 id="Bookmark2000">Приложения</h1>
										<!---------------------------------------------------->
										<!-- ##	Описание БД									-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Описание БД</h2>
										<p>Сущности БД УД (smart-back), используемые в сценариях:</p>
										<ol>
											<li><a href="/portfolio/pages/portofolio/database/events_groups.html">events_groups</a> - Группы событий. Сущность для создания групп событий и дальнейшего использования этих групп в фильтрации в разделе события.</li>
											<li><a href="/portfolio/pages/portofolio/database/event_types.html">event_types</a> - Справочник событий с параметрами событий для использования в разделе УД "События" при отображении записи и для фильтрации событий.</li>
											<li><a href="/portfolio/pages/portofolio/database/event_types_groups.html">event_types_groups</a> - JOIN-таблица.</li>
										</ol>
										<!---------------------------------------------------->
										<!-- ##	Скрипт наполнения БД event_groups			-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Скрипт наполнения таблицы БД "Группы событий" (event_groups)</h2>
										<ol>
											<li>"id": auto, "name": "Учётная запись"</li>
											<li>"id": auto, "name": "Устройства"</li>
											<li>"id": auto, "name": "Камеры"</li>
											<li>"id": auto, "name": "Мой дом"</li>
											<li>"id": auto, "name": "Мои сценарии"</li>
											<li>"id": auto, "name": "Баланс и услуги"</li>
										</ol>
										<!---------------------------------------------------->
										<!-- ##	Скрипт наполнения БД event_types			-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Скрипт наполнения таблицы БД "Типы событий" (event_types)</h2>
										<ol>
											<li>"id": auto</li>
											<li>"event_name": "register_event" из definitions.rb</li>
											<li>"filter_name":
												<ol>
													<li>{"filter_name": "Человек в кадре", для события с "eid": 20104}</li>
													<li>{"filter_name": "Обнаружение лиц", для события с "eid": 20102}</li>
													<li>{"filter_name": "Движение", для события с"eid": 20002}</li>
													<li>{"filter_name": "Звук", для события с"eid": 20007}</li>
													<li>{"filter_name": "Пересечение линии", для события с"eid": 20004}</li>
													<li>{"filter_name": "Перекрытие обзора", для события с"eid": 20003}</li>
													<li>{"filter_name": "Камера онлайн", для события с"eid": 32000}</li>
													<li>{"filter_name": "Камера офлайн", для события с"eid": 32001}</li>
													<li>{"filter_name": "Обрыв трансляции", для события с"eid": 60000}</li>
												</ol>
											</li>
											<li>"origin_class": "origin_class" из definitions.rb</li>
											<li>"eid": "eid" из definitions.rb</li>
											<li>"icon_name": "icon" из definitions.rb</li>
											<li>"default_message": "default" из events.yml для event_type = event_name</li>
											<li>"popup": "popup" из definitions.rb</li>
										</ol>
										<!---------------------------------------------------->
										<!-- ##	Скрипт наполнения join-таблицы (event_types_groups)	-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Скрипт наполнения join-таблицы (event_types_groups)</h2>
										<ol>
											<li>"id" группы "Учётная запись" из event_groups | "id" типа события из event_types, для которых "origin_class" = Account + User</li>
											<li>"id" группы "Устройства" из event_groups | "id" типа события из event_types, для которых "origin_class" = Device + Node</li>
											<li>"id" группы "Камеры" из event_groups | "id" типа события из event_types, для которых "origin_class" = Device:Camera</li>
											<li>"id" группы "Мой дом" из event_groups | "id" типа события из event_types, для которых "origin_class" = Home + Home:Mode + Room</li>
											<li>"id" группы "Мои сценарии" из event_groups | "id" типа события из event_types, для которых "origin_class" = Rule</li>
											<li>"id" группы "Баланс и услуги" из event_groups | "id" типа события из event_types, для которых "origin_class" = TariffOption</li>
										</ol>
										<!---------------------------------------------------->
										<!-- ##	Описание API								-->
										<!---------------------------------------------------->
										<a name="Bookmark2100"></a>
										<h2 id="Bookmark2100">Описание API</h2>
										<p>Методы Бэкенда УД (smart-back), используемые в сценариях:</p>
										<ul>
											<li><a href="/portofolio/pages/portofolio/api/getfilters.html">GET api/v3/events/filters</a>;</li>
											<li><a href="/portofolio/pages/portofolio/api/postevents.html">POST api/v3/events</a>;</li>
											<li><a href="/portofolio/pages/portofolio/api/postdays.html">POST api/v3/events/days</a></li>
										</ul>
										<p>Методы EStore, используемые в сценариях:</p>
										<ul>
											<li>POST /api/estore/events/by_devices</li>
										</ul>
									</div>
								</div>
							</div>
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<!---------------------------------------------------->
							<div class="columnLayout single" data-layout="single">
								<div class="cell normal" data-type="normal">
									<div class="innerCell">
										<hr>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script>
			Split(['#sidebar', '#content'], {
				sizes: [15, 85],
				minSize: 100
			});
		</script>
		<script>
			// Функция копирования кода
			function copyCode(button) {
				const codeBlock = button.closest('.code-container').querySelector('code');
				const textArea = document.createElement('textarea');
				textArea.value = codeBlock.textContent;
				document.body.appendChild(textArea);
				textArea.select();
				document.execCommand('copy');
				document.body.removeChild(textArea);
				
				// Визуальное подтверждение
				const originalText = button.textContent;
				button.textContent = 'Скопировано!';
				setTimeout(() => {
					button.textContent = originalText;
				}, 2000);
			}
			
			// Инициализация Prism после загрузки страницы
			document.addEventListener('DOMContentLoaded', function() {
				if (typeof Prism !== 'undefined') {
					Prism.highlightAll();
				}
			});
		</script>
	</body>
</html>